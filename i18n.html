<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>i18n Guide | Blue Archive Auto Script</title>
    <meta name="description" content="用于实现蔚蓝档案自动化">
    <meta name="generator" content="VitePress v1.0.0-rc.45">
    <link rel="preload stylesheet" href="/blue_archive_auto_script/assets/style.RQoIPuEU.css" as="style">
    
    <script type="module" src="/blue_archive_auto_script/assets/app.DqFlansA.js"></script>
    <link rel="preload" href="/blue_archive_auto_script/assets/inter-roman-latin.bvIUbFQP.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/blue_archive_auto_script/assets/chunks/framework.NxaGTdzX.js">
    <link rel="modulepreload" href="/blue_archive_auto_script/assets/chunks/theme.jxn0u9J5.js">
    <link rel="modulepreload" href="/blue_archive_auto_script/assets/i18n.md.PkJNKMxg.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-e28abee3><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0eb15a7a></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0eb15a7a> Skip to content </a><!--]--><!----><header class="VPNav" data-v-e28abee3 data-v-bb857bd0><div class="VPNavBar has-sidebar" data-v-bb857bd0 data-v-805d7483><div class="wrapper" data-v-805d7483><div class="container" data-v-805d7483><div class="title" data-v-805d7483><div class="VPNavBarTitle has-sidebar" data-v-805d7483 data-v-500dad16><a class="title" href="/blue_archive_auto_script/" data-v-500dad16><!--[--><!--]--><!----><span data-v-500dad16>Blue Archive Auto Script</span><!--[--><!--]--></a></div></div><div class="content" data-v-805d7483><div class="content-body" data-v-805d7483><!--[--><!--]--><div class="VPNavBarSearch search" data-v-805d7483><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-805d7483 data-v-c665bb56><span id="main-nav-aria-label" class="visually-hidden" data-v-c665bb56>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blue_archive_auto_script/" tabindex="0" data-v-c665bb56 data-v-62103f59><!--[--><span data-v-62103f59>主页</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blue_archive_auto_script/downloads.html" tabindex="0" data-v-c665bb56 data-v-62103f59><!--[--><span data-v-62103f59>下载</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-805d7483 data-v-a557f2a2><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-a557f2a2 data-v-5c7780ea data-v-b87fcaa1><span class="check" data-v-b87fcaa1><span class="icon" data-v-b87fcaa1><!--[--><span class="vpi-sun sun" data-v-5c7780ea></span><span class="vpi-moon moon" data-v-5c7780ea></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-805d7483 data-v-14c0c8b4 data-v-4fb597b2><!--[--><a class="VPSocialLink no-icon" href="https://github.com/pur1fying/blue_archive_auto_script" aria-label="github" target="_blank" rel="noopener" data-v-4fb597b2 data-v-879380ec><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-805d7483 data-v-6b9be2ba data-v-50284201><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-50284201><span class="vpi-more-horizontal icon" data-v-50284201></span></button><div class="menu" data-v-50284201><div class="VPMenu" data-v-50284201 data-v-ed63bd54><!----><!--[--><!--[--><!----><div class="group" data-v-6b9be2ba><div class="item appearance" data-v-6b9be2ba><p class="label" data-v-6b9be2ba>Appearance</p><div class="appearance-action" data-v-6b9be2ba><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-6b9be2ba data-v-5c7780ea data-v-b87fcaa1><span class="check" data-v-b87fcaa1><span class="icon" data-v-b87fcaa1><!--[--><span class="vpi-sun sun" data-v-5c7780ea></span><span class="vpi-moon moon" data-v-5c7780ea></span><!--]--></span></span></button></div></div></div><div class="group" data-v-6b9be2ba><div class="item social-links" data-v-6b9be2ba><div class="VPSocialLinks social-links-list" data-v-6b9be2ba data-v-4fb597b2><!--[--><a class="VPSocialLink no-icon" href="https://github.com/pur1fying/blue_archive_auto_script" aria-label="github" target="_blank" rel="noopener" data-v-4fb597b2 data-v-879380ec><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-805d7483 data-v-6b846c53><span class="container" data-v-6b846c53><span class="top" data-v-6b846c53></span><span class="middle" data-v-6b846c53></span><span class="bottom" data-v-6b846c53></span></span></button></div></div></div></div><div class="divider" data-v-805d7483><div class="divider-line" data-v-805d7483></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-e28abee3 data-v-2d8f0a9f><div class="container" data-v-2d8f0a9f><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2d8f0a9f><span class="vpi-align-left menu-icon" data-v-2d8f0a9f></span><span class="menu-text" data-v-2d8f0a9f>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2d8f0a9f data-v-c814ff62><button data-v-c814ff62>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-e28abee3 data-v-0a0dcb9e><div class="curtain" data-v-0a0dcb9e></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-0a0dcb9e><span class="visually-hidden" id="sidebar-aria-label" data-v-0a0dcb9e> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-0a0dcb9e><section class="VPSidebarItem level-0" data-v-0a0dcb9e data-v-c72449ba><div class="item" role="button" tabindex="0" data-v-c72449ba><div class="indicator" data-v-c72449ba></div><h2 class="text" data-v-c72449ba>用户文档</h2><!----></div><div class="items" data-v-c72449ba><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c72449ba data-v-c72449ba><div class="item" data-v-c72449ba><div class="indicator" data-v-c72449ba></div><a class="VPLink link link" href="/blue_archive_auto_script/features.html" data-v-c72449ba><!--[--><p class="text" data-v-c72449ba>特性</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c72449ba data-v-c72449ba><div class="item" data-v-c72449ba><div class="indicator" data-v-c72449ba></div><a class="VPLink link link" href="/blue_archive_auto_script/install.html" data-v-c72449ba><!--[--><p class="text" data-v-c72449ba>安装</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c72449ba data-v-c72449ba><div class="item" data-v-c72449ba><div class="indicator" data-v-c72449ba></div><a class="VPLink link link" href="/blue_archive_auto_script/config.html" data-v-c72449ba><!--[--><p class="text" data-v-c72449ba>配置</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c72449ba data-v-c72449ba><div class="item" data-v-c72449ba><div class="indicator" data-v-c72449ba></div><a class="VPLink link link" href="/blue_archive_auto_script/faq.html" data-v-c72449ba><!--[--><p class="text" data-v-c72449ba>常见问题</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c72449ba data-v-c72449ba><div class="item" data-v-c72449ba><div class="indicator" data-v-c72449ba></div><a class="VPLink link link" href="/blue_archive_auto_script/report.html" data-v-c72449ba><!--[--><p class="text" data-v-c72449ba>上报问题</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c72449ba data-v-c72449ba><div class="item" data-v-c72449ba><div class="indicator" data-v-c72449ba></div><a class="VPLink link link" href="/blue_archive_auto_script/docs.html" data-v-c72449ba><!--[--><p class="text" data-v-c72449ba>编写文档</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c72449ba data-v-c72449ba><div class="item" data-v-c72449ba><div class="indicator" data-v-c72449ba></div><a class="VPLink link link" href="/blue_archive_auto_script/about.html" data-v-c72449ba><!--[--><p class="text" data-v-c72449ba>关于</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-0a0dcb9e><section class="VPSidebarItem level-0" data-v-0a0dcb9e data-v-c72449ba><div class="item" role="button" tabindex="0" data-v-c72449ba><div class="indicator" data-v-c72449ba></div><h2 class="text" data-v-c72449ba>开发文档</h2><!----></div><div class="items" data-v-c72449ba><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c72449ba data-v-c72449ba><div class="item" data-v-c72449ba><div class="indicator" data-v-c72449ba></div><a class="VPLink link link" href="/blue_archive_auto_script/device_operation.html" data-v-c72449ba><!--[--><p class="text" data-v-c72449ba>模拟器api</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-0a0dcb9e><section class="VPSidebarItem level-0" data-v-0a0dcb9e data-v-c72449ba><div class="item" role="button" tabindex="0" data-v-c72449ba><div class="indicator" data-v-c72449ba></div><h2 class="text" data-v-c72449ba>Examples</h2><!----></div><div class="items" data-v-c72449ba><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c72449ba data-v-c72449ba><div class="item" data-v-c72449ba><div class="indicator" data-v-c72449ba></div><a class="VPLink link link" href="/blue_archive_auto_script/markdown-examples.html" data-v-c72449ba><!--[--><p class="text" data-v-c72449ba>Markdown Examples</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c72449ba data-v-c72449ba><div class="item" data-v-c72449ba><div class="indicator" data-v-c72449ba></div><a class="VPLink link link" href="/blue_archive_auto_script/api-examples.html" data-v-c72449ba><!--[--><p class="text" data-v-c72449ba>Runtime API Examples</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-e28abee3 data-v-02b186d8><div class="VPDoc has-sidebar has-aside" data-v-02b186d8 data-v-f01f9140><!--[--><!--]--><div class="container" data-v-f01f9140><div class="aside" data-v-f01f9140><div class="aside-curtain" data-v-f01f9140></div><div class="aside-container" data-v-f01f9140><div class="aside-content" data-v-f01f9140><div class="VPDocAside" data-v-f01f9140 data-v-93ec16be><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-93ec16be data-v-f53ac2ac><div class="content" data-v-f53ac2ac><div class="outline-marker" data-v-f53ac2ac></div><div class="outline-title" role="heading" aria-level="2" data-v-f53ac2ac>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-f53ac2ac><span class="visually-hidden" id="doc-outline-aria-label" data-v-f53ac2ac> Table of Contents for current page </span><ul class="VPDocOutlineItem root" data-v-f53ac2ac data-v-fed231b6><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-93ec16be></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-f01f9140><div class="content-container" data-v-f01f9140><!--[--><!--]--><main class="main" data-v-f01f9140><div style="position:relative;" class="vp-doc _blue_archive_auto_script_i18n" data-v-f01f9140><div><h1 id="i18n-guide" tabindex="-1">i18n Guide <a class="header-anchor" href="#i18n-guide" aria-label="Permalink to &quot;i18n Guide&quot;">​</a></h1><h2 id="requirements" tabindex="-1">Requirements <a class="header-anchor" href="#requirements" aria-label="Permalink to &quot;Requirements&quot;">​</a></h2><ul><li><a href="https://github.com/thurask/Qt-Linguist/releases" target="_blank" rel="noreferrer">Qt Linguist</a></li><li>[OPTIONAL]</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>pip install -r requirements-i18n.txt</span></span></code></pre></div><h2 id="translation" tabindex="-1">Translation <a class="header-anchor" href="#translation" aria-label="Permalink to &quot;Translation&quot;">​</a></h2><h3 id="adding-a-new-language" tabindex="-1">Adding a New Language <a class="header-anchor" href="#adding-a-new-language" aria-label="Permalink to &quot;Adding a New Language&quot;">​</a></h3><p>To include a new language, add a new member to the Language enum representing the language with its corresponding QLocale object. Then, update the combobox method to return a list of language names based on the enum members order. For example, to add Japanese:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>class Language(Enum):</span></span>
<span class="line"><span>    &quot;&quot;&quot; Language enumeration &quot;&quot;&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    CHINESE_SIMPLIFIED = QLocale(QLocale.Chinese, QLocale.China)</span></span>
<span class="line"><span>    ENGLISH = QLocale(QLocale.English, QLocale.UnitedStates)</span></span>
<span class="line"><span>    JAPANESE = QLocale(QLocale.Japanese, QLocale.Japan)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    def combobox():</span></span>
<span class="line"><span>        return [&#39;简体中文&#39;, &#39;English&#39;, &#39;日本語&#39;]</span></span></code></pre></div><p>Run the Python file; it will print the language acronym:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>ja_JP</span></span></code></pre></div><p>Open <code>i18n.pro</code> and modify the <code>TRANSLATION</code> variable by appending <code>gui/i18n/</code> + acronym:</p><div class="language-pro vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">pro</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>TRANSLATIONS += gui/i18n/en_US.ts \</span></span>
<span class="line"><span>        gui/i18n/ja_JP.ts \</span></span></code></pre></div><p>Execute the following command to generate <code>.ts</code> files:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>pylupdate5 i18n.pro</span></span></code></pre></div><p>OPTIONAL: <code>auto_translate.py</code></p><p>Utilize <code>argostranslate</code> to accelerate translations after installing the necessary packages from <code>requirements-i18n.txt</code>. Note that while translations may not be perfect, they can speed up the process.</p><p>Simply create a new <code>Request</code> instance at the end of <code>auto_translate.py</code> and invoke its <code>process</code> method.</p><p>The <code>Request</code> constructor is as follows:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    from_code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;zh&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, handlers: list[Handler], language: Language, argos_model: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Parameters</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        ----------</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        handlers: list[Handler]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            a list of handlers that represent the files to translate. </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        language: Language</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            the memeber of the enum Language to translate</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        argos_model: str </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            The argos model to load for translation</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;</span></span></code></pre></div><p>Then:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">model </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ModelHandler()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> XmlHandler()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">descriptions </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HtmlHandler()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">request_jp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Request([model, ts, descriptions], Language.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JAPANESE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ja&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">request_jp.process()</span></span></code></pre></div><p>This means that <code>.ts</code> and description files will be generated. You can adjust the list of handlers as needed, but <code>model</code> must always be the first element.</p><p>Also, in case no model exists for your language, you could create a new subclass of Request, override its translate method to use another Python library, and omit ModelHandler from the list of handlers.</p><p>Open <code>Qt Linguist</code>, load the <code>.ts</code> file, and manually translate. This step will require some time.</p><p>Afterward, navigate to <code>gui/i18n</code> and execute the following command:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>lrelease ja_JP.ts</span></span></code></pre></div><p>This will produce the <code>.qm</code> files.</p><h2 id="baastranslator" tabindex="-1"><code>baasTranslator</code> <a class="header-anchor" href="#baastranslator" aria-label="Permalink to &quot;`baasTranslator`&quot;">​</a></h2><h3 id="problems" tabindex="-1">Problems <a class="header-anchor" href="#problems" aria-label="Permalink to &quot;Problems&quot;">​</a></h3><p>In normal scenarios, the <code>tr</code> method of <code>QObject</code> is used for translation, inherited by most PyQt5 classes. However, this approach isn&#39;t always possible for <code>baas</code> due to:</p><ul><li>Widget text being generated from JSON files</li><li>Need to retain user input (e.g., combobox selections) in Chinese within config files</li></ul><h3 id="solution" tabindex="-1">Solution <a class="header-anchor" href="#solution" aria-label="Permalink to &quot;Solution&quot;">​</a></h3><p>To address this:</p><ul><li><code>ConfigTranslation</code>: a <code>QObject</code> subclass with a dictionary attribute mapping text enclosed in <code>self.tr</code> to itself:</li></ul><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.entries </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # display</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.tr(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;每日特别委托&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">): </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;每日特别委托&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span></span></code></pre></div><ul><li><p>Utilize a specific instance of <code>QTranslator</code> named <code>baasTranslator</code> from <code>gui/util/translator.py</code> as <code>bt</code>, employing its methods:</p><ul><li><code>tr(context, sourceText)</code></li><li><code>undo(text)</code></li></ul></li></ul><p>For instance, <code>bt.tr(&#39;ConfigTranslation&#39;, &#39;国际服&#39;)</code> will produce its translation, &#39;Global&#39;, and <code>bt.undo(&#39;Global&#39;)</code> will revert it to &#39;国际服&#39;. This functionality is already implemented in <code>get</code> and <code>set</code> method of <code>ConfigSet</code>.</p><p>In essence, <code>tr</code> accesses the <code>.qm</code> file to retrieve translations based on the <code>ConfigTranslation</code> context, while <code>undo</code> retrieves the value from the mapped dictionary where the translation was stored.</p><p>Note that contexts other than <code>&#39;ConfigTranslation&#39;</code> are accessible. For example:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Layout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TemplateLayout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, parent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        configItems </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;label&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;一键反和谐&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;type&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;button&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;selection&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.fhx,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;key&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">__init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">parent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">parent, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">configItems</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">configItems, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">config)</span></span></code></pre></div><p>Suppose you want to translate the <code>label</code> and <code>selection</code> but can&#39;t access the <code>tr</code> method directly since you must first invoke the parent constructor and wish to avoid extensive modifications. Here&#39;s a solution:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Layout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TemplateLayout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, parent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        OtherConfig </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> QObject()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        configItems </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;label&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: OtherConfig.tr(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;一键反和谐&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;type&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;button&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;selection&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.fhx,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;key&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">__init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">parent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">parent, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">configItems</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">configItems, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">config, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;OtherConfig&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><ol><li>Add a new <code>context</code> parameter to the <code>TemplateLayout</code> constructor.</li><li>Create an instance of <code>QObject</code> named <code>OtherConfig</code>. This establishes a new context when generating the <code>.ts</code> files, allowing you to pass <code>&#39;OtherConfig&#39;</code> to the <code>TemplateLayout</code> constructor.</li></ol><p>Now, accessing translations in <code>TemplateLayout</code> becomes straightforward:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TemplateLayout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">QWidget</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    patch_signal </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pyqtSignal(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, configItems: Union[list[ConfigItem], list[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]], parent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, context</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    labelComponent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> QLabel(bt.tr(context, cfg.label), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h2 id="adding-new-gui-py-files" tabindex="-1">Adding new GUI .py files <a class="header-anchor" href="#adding-new-gui-py-files" aria-label="Permalink to &quot;Adding new GUI .py files&quot;">​</a></h2><p>Please ensure to include the file path of the new GUI .py files into the <code>i18n.pro</code> file&#39;s <code>SOURCES</code> variable, taking care to use the correct slashes. For instance, if you&#39;re adding <code>table.py</code> located in <code>gui/components</code>, it should be appended like this:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>SOURCES += \</span></span>
<span class="line"><span>    gui/components/table.py \</span></span></code></pre></div><h2 id="adding-new-config-value" tabindex="-1">Adding new Config value <a class="header-anchor" href="#adding-new-config-value" aria-label="Permalink to &quot;Adding new Config value&quot;">​</a></h2><p>When adding a new config value that appears on the GUI and needs translation, update the <code>ConfigTranslation</code> dictionary by adding a new key-value pair. For comboboxes, make sure to include all options.</p></div></div></main><footer class="VPDocFooter" data-v-f01f9140 data-v-6e51b3ba><!--[--><!--]--><div class="edit-info" data-v-6e51b3ba><!----><div class="last-updated" data-v-6e51b3ba><p class="VPLastUpdated" data-v-6e51b3ba data-v-2ec57cfd>更新于: <time datetime="2025-01-15T08:01:47.000Z" data-v-2ec57cfd></time></p></div></div><nav class="prev-next" data-v-6e51b3ba><div class="pager" data-v-6e51b3ba><!----></div><div class="pager" data-v-6e51b3ba><a class="VPLink link pager-link next" href="/blue_archive_auto_script/features.html" data-v-6e51b3ba><!--[--><span class="desc" data-v-6e51b3ba>Next page</span><span class="title" data-v-6e51b3ba>特性</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"markdown-examples.md\":\"y387s5A1\",\"faq.md\":\"RhFjRuKg\",\"i18n.md\":\"PkJNKMxg\",\"about.md\":\"E9JNvo-_\",\"index.md\":\"jw2NA9MY\",\"config.md\":\"ya6bMkFy\",\"downloads.md\":\"t0xQ2o1e\",\"install.md\":\"Dl1QdiJX\",\"api-examples.md\":\"mkBn4Tfb\",\"cli.md\":\"bGxZ8kbi\",\"report.md\":\"h9-_e-9E\",\"features.md\":\"a4uhUQo9\",\"device_operation.md\":\"KL5HvWoL\",\"docs.md\":\"_nu2VPx4\",\"develop_format.md\":\"W97-UvVn\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Blue Archive Auto Script\",\"description\":\"用于实现蔚蓝档案自动化\",\"base\":\"/blue_archive_auto_script/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"主页\",\"link\":\"/\"},{\"text\":\"下载\",\"link\":\"/downloads\"}],\"sidebar\":[{\"text\":\"用户文档\",\"items\":[{\"text\":\"特性\",\"link\":\"/features\"},{\"text\":\"安装\",\"link\":\"/install\"},{\"text\":\"配置\",\"link\":\"/config\"},{\"text\":\"常见问题\",\"link\":\"/faq\"},{\"text\":\"上报问题\",\"link\":\"/report\"},{\"text\":\"编写文档\",\"link\":\"/docs\"},{\"text\":\"关于\",\"link\":\"/about\"}]},{\"text\":\"开发文档\",\"items\":[{\"text\":\"模拟器api\",\"link\":\"/device_operation\"}]},{\"text\":\"Examples\",\"items\":[{\"text\":\"Markdown Examples\",\"link\":\"/markdown-examples\"},{\"text\":\"Runtime API Examples\",\"link\":\"/api-examples\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/pur1fying/blue_archive_auto_script\"}],\"lastUpdated\":{\"text\":\"更新于\",\"formatOptions\":{\"dateStyle\":\"full\",\"timeStyle\":\"medium\"}}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>